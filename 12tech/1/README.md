Submit a solution for tech10-1-posix/sockets/http-server-1

Full score:	100

Run penalty:	5

Time limit:	2 s

Real time limit:	4 s

Memory limit:	64M

Open date:	2022/11/30 09:00:00

Problem tech10-1: posix/sockets/http-server-1

Необходимо реализовать программу-сервер, которой передаются два аргумента: номер порта и полный путь к каталогу с данными.

Программа должна прослушивать TCP-соединение на сервере localhost и указанным номером порта.

После получения сигнала SIGTERM или SIGINT сервер должен закончить обработку текущего соединения, если оно есть, после чего корректно завершить свою работу.

Внимание: в этой задаче признаком конца строк считается пара символов "\r\n", а не одиночный символ '\n'.

Каждое соединение должно обрабатываться следующим образом:

1. Клиент отправляет строку вида GET ИМЯ_ФАЙЛА HTTP/1.1
2. Клиент отправляет произвольное количество непустых строк
3. Клиент отправляет пустую строку

После получения пустой строки от клиента, сервер должен отправить клиенту слеющие данные:

1. Строку HTTP/1.1 200 OK, если файл существует, или HTTP/1.1 404 Not Found, если файл не существует, или HTTP/1.1 403 Forbidden, если файл существует, но не доступен для чтения
2. Строку Content-Length: %d, где %d - размер файла в байтах
3. Пустую строку
4. Содержимое файла as-is
После отправки ответа клиенту, нужно закрыть соединение и не нужно ждать ожидать от клиента следующих запросов.

